<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Silver Key Realty — Workspace</title>
  <meta name="robots" content="noindex, nofollow">
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Outfit:wght@200;300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/tokens.css"><link rel="stylesheet" href="../../assets/css/base.css"><link rel="stylesheet" href="../../assets/css/admin.css">
  <style>
    .ws-main { display:flex; flex:1; overflow:hidden; }

    .ws-canvas { flex:1; display:flex; flex-direction:column; overflow:hidden; }
    .ws-canvas-scroll { flex:1; overflow-y:auto; padding:40px 24px 24px; display:flex; justify-content:center; }
    .ws-canvas-inner { width:100%; max-width:680px; }

    .ws-welcome { text-align:center; padding:80px 0; }
    .ws-welcome-title { font-family:'Cormorant Garamond',serif; font-size:32px; font-weight:300; color:rgba(255,255,255,.5); letter-spacing:-0.5px; }
    .ws-welcome-title strong { font-weight:600; color:#F0EBE3; }
    .ws-welcome-sub { font-size:13px; color:rgba(255,255,255,.2); font-style:italic; margin-top:20px; transition:opacity .4s; }

    .ws-tabs { display:flex; gap:2px; background:rgba(255,255,255,.02); border-radius:6px; padding:2px; }
    .ws-tab { padding:5px 14px; border-radius:4px; font-size:11px; font-weight:500; color:rgba(255,255,255,.3); cursor:pointer; background:none; border:none; font-family:'Outfit',sans-serif; transition:all .12s; }
    .ws-tab:hover { color:rgba(255,255,255,.6); }
    .ws-tab.active { background:rgba(255,255,255,.06); color:#F0EBE3; }

    .ws-cmd { padding:12px 16px; border-top:1px solid rgba(255,255,255,.04); background:rgba(17,17,17,.9); backdrop-filter:blur(16px); display:flex; align-items:center; gap:8px; }
    .ws-cmd-input { flex:1; padding:12px 48px 12px 16px; border-radius:12px; border:1px solid rgba(255,255,255,.05); background:rgba(26,26,26,.8); font-family:'Outfit',sans-serif; font-size:14px; color:#F0EBE3; outline:none; transition:all .2s; }
    .ws-cmd-input:focus { border-color:rgba(58,148,100,.25); box-shadow:0 0 0 3px rgba(58,148,100,.05); background:#1A1A1A; }
    .ws-cmd-input::placeholder { color:rgba(255,255,255,.2); }
    .ws-cmd-send { width:34px; height:34px; border-radius:8px; border:none; cursor:pointer; background:linear-gradient(135deg,#3A9464,#C9B99A); display:flex; align-items:center; justify-content:center; transition:all .2s; }
    .ws-cmd-send:hover { filter:brightness(1.1); transform:scale(1.05); }
    .ws-cmd-send svg { width:14px; height:14px; }

    .ws-chips { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:24px; }
    .ws-chip { padding:6px 14px; border-radius:8px; border:1px solid rgba(255,255,255,.05); background:rgba(26,26,26,.5); font-size:12px; color:rgba(255,255,255,.35); cursor:pointer; font-family:'Outfit',sans-serif; transition:all .12s; }
    .ws-chip:hover { border-color:rgba(255,255,255,.12); color:rgba(255,255,255,.6); background:#1A1A1A; }

    .ws-right { width:0; background:rgba(17,17,17,.9); backdrop-filter:blur(12px); border-left:1px solid rgba(255,255,255,.04); overflow:hidden; transition:width .25s cubic-bezier(.23,1,.32,1); flex-shrink:0; display:flex; flex-direction:column; }
    .ws-right.open { width:260px; }
    .ws-right-header { padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.04); display:flex; justify-content:space-between; align-items:center; white-space:nowrap; }
    .ws-right-title { font-size:11px; font-weight:500; color:rgba(255,255,255,.5); text-transform:uppercase; letter-spacing:1.5px; }
    .ws-right-close { width:22px; height:22px; border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:none; background:none; color:rgba(255,255,255,.25); font-size:12px; }
    .ws-right-body { flex:1; overflow-y:auto; padding:10px; }
    .ws-rp-card { padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,.04); background:rgba(26,26,26,.5); margin-bottom:6px; cursor:pointer; transition:all .12s; }
    .ws-rp-card:hover { border-color:rgba(255,255,255,.08); background:#1A1A1A; }
    .ws-rp-type { font-size:9px; color:rgba(255,255,255,.2); text-transform:uppercase; letter-spacing:1px; margin-bottom:3px; }
    .ws-rp-name { font-size:12px; font-weight:500; color:rgba(255,255,255,.6); margin-bottom:2px; }
    .ws-rp-desc { font-size:10.5px; color:rgba(255,255,255,.25); line-height:1.4; }

    .ws-doc { display:none; }
    .ws-doc.visible { display:block; }
    .ws-doc h1 { font-family:'Cormorant Garamond',serif; font-size:26px; font-weight:300; color:#F0EBE3; line-height:1.3; margin-bottom:8px; }
    .ws-doc h2 { font-size:16px; font-weight:500; color:#C9B99A; margin-top:28px; margin-bottom:10px; }
    .ws-doc p { font-size:14px; color:rgba(255,255,255,.6); line-height:1.8; margin-bottom:14px; }
    .ws-doc .sub { font-size:12px; color:rgba(255,255,255,.3); font-style:italic; margin-bottom:24px; padding-bottom:16px; border-bottom:1px solid rgba(255,255,255,.04); }

    .ws-topbar { height:42px; display:flex; align-items:center; padding:0 16px; border-bottom:1px solid rgba(255,255,255,.04); background:rgba(17,17,17,.85); backdrop-filter:blur(16px); flex-shrink:0; gap:10px; }
    .ws-topname { font-size:13px; font-weight:500; color:rgba(255,255,255,.6); cursor:pointer; padding:3px 8px; border-radius:4px; }
    .ws-topname:hover { background:rgba(255,255,255,.04); }
    .ws-topbar-spacer { flex:1; }
    .ws-status { display:flex; align-items:center; gap:5px; font-size:11px; color:rgba(255,255,255,.25); }
    .ws-status-dot { width:5px; height:5px; border-radius:50%; background:#3A9464; box-shadow:0 0 4px rgba(58,148,100,.4); }
    .ws-toggle-right { padding:5px 12px; border-radius:6px; font-size:11px; font-weight:500; cursor:pointer; border:1px solid rgba(255,255,255,.06); background:none; color:rgba(255,255,255,.4); font-family:'Outfit',sans-serif; transition:all .12s; }
    .ws-toggle-right:hover { border-color:rgba(255,255,255,.12); color:rgba(255,255,255,.7); }

    .ws-mesh { position:absolute; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .ws-orb { position:absolute; border-radius:50%; filter:blur(120px); animation:wsdrift 20s ease-in-out infinite; }
    .wo1 { width:350px; height:350px; background:rgba(58,148,100,.03); top:-8%; left:-3%; }
    .wo2 { width:280px; height:280px; background:rgba(201,185,154,.02); bottom:-5%; right:5%; animation-delay:-8s; animation-duration:24s; }
    @keyframes wsdrift { 0%,100%{transform:translate(0,0) scale(1)} 50%{transform:translate(15px,-10px) scale(1.03)} }
  </style>
</head>
<body>
  <div id="skr-loader" class="skr-loader"><div class="skr-spinner"></div></div>
  <div id="skr-main" class="skr-shell" style="display:none">
    <aside id="skr-sidebar" class="skr-sidebar"></aside>

    <div class="ws-main" style="position:relative">
      <div class="ws-mesh"><div class="ws-orb wo1"></div><div class="ws-orb wo2"></div></div>

      <div class="ws-canvas" style="position:relative;z-index:1">
        <div class="ws-topbar">
          <span class="ws-topname" id="ws-docname">Untitled</span>
          <div class="ws-tabs">
            <button class="ws-tab active">Document</button>
            <button class="ws-tab">Note</button>
            <button class="ws-tab">Template</button>
          </div>
          <div class="ws-topbar-spacer"></div>
          <div class="ws-status"><span class="ws-status-dot"></span> Ready</div>
          <button class="ws-toggle-right" onclick="document.getElementById('ws-right').classList.toggle('open')">&#9672; Drive</button>
        </div>

        <div class="ws-canvas-scroll" id="ws-scroll">
          <div class="ws-canvas-inner">
            <div id="ws-welcome" class="ws-welcome">
              <div class="ws-welcome-title"><strong>Your workspace.</strong></div>
              <div class="ws-welcome-sub" id="ws-affirmation">Build documents, send messages, manage your day.</div>

              <div class="ws-chips" style="justify-content:center;margin-top:32px">
                <button class="ws-chip" onclick="usePrompt('Draft a CMA report for a 3-bed in Pontiac')">&#128202; CMA Report</button>
                <button class="ws-chip" onclick="usePrompt('Write a buyer consultation follow-up email')">&#9993; Follow-up Email</button>
                <button class="ws-chip" onclick="usePrompt('Create a deal memo for a new listing')">&#128203; Deal Memo</button>
                <button class="ws-chip" onclick="usePrompt('Draft a client welcome letter')">&#129309; Welcome Letter</button>
                <button class="ws-chip" onclick="usePrompt('Summarize our active deals and next steps')">&#11041; Deal Summary</button>
              </div>
            </div>

            <div id="ws-doc" class="ws-doc"></div>
          </div>
        </div>

        <div class="ws-cmd">
          <div style="flex:1;position:relative">
            <input type="text" class="ws-cmd-input" id="ws-input" placeholder="Ask anything or describe what to create..." autocomplete="off">
          </div>
          <button class="ws-cmd-send" onclick="handleSend()">
            <svg viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="#111" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
        </div>
      </div>

      <div class="ws-right" id="ws-right">
        <div class="ws-right-header">
          <div class="ws-right-title">Suggestions</div>
          <button class="ws-right-close" onclick="document.getElementById('ws-right').classList.remove('open')">&#10005;</button>
        </div>
        <div class="ws-right-body">
          <div class="ws-rp-card">
            <div class="ws-rp-type">Quick Action</div>
            <div class="ws-rp-name">Draft Client Email</div>
            <div class="ws-rp-desc">Compose a branded email to any lead or contact</div>
          </div>
          <div class="ws-rp-card">
            <div class="ws-rp-type">Template</div>
            <div class="ws-rp-name">Buyer Consultation Prep</div>
            <div class="ws-rp-desc">Pre-meeting checklist and talking points</div>
          </div>
          <div class="ws-rp-card">
            <div class="ws-rp-type">From Quam Drive</div>
            <div class="ws-rp-name">Recent Uploads</div>
            <div class="ws-rp-desc">View files uploaded in the last 7 days</div>
          </div>
          <div class="ws-rp-card">
            <div class="ws-rp-type">Intelligence</div>
            <div class="ws-rp-name">Deal Health Check</div>
            <div class="ws-rp-desc">AI analysis of your active deals' completeness</div>
          </div>
          <div class="ws-rp-card">
            <div class="ws-rp-type">Quick Action</div>
            <div class="ws-rp-name">Schedule Showing</div>
            <div class="ws-rp-desc">Set up a property viewing for a lead</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="../../assets/js/admin-config.js"></script>
  <script src="../../assets/js/skr-auth.js"></script>
  <script>
    var wsInput = document.getElementById('ws-input');
    wsInput.addEventListener('keydown', function(e) { if (e.key === 'Enter') { e.preventDefault(); handleSend(); } });

    function usePrompt(t) { wsInput.value = t; wsInput.focus(); }

    var affirmations = [
      "Build documents, send messages, manage your day.",
      "Your command center for everything Silver Key.",
      "Start typing to create something new.",
      "Every great deal starts with clear communication.",
      "Your workspace. Your workflow. Your way."
    ];
    var aIdx = 0;
    setInterval(function() {
      var el = document.getElementById('ws-affirmation');
      if (!el) return;
      el.style.opacity = 0;
      setTimeout(function() { aIdx = (aIdx + 1) % affirmations.length; el.textContent = affirmations[aIdx]; el.style.opacity = 1; }, 350);
    }, 5000);

    async function handleSend() {
      var prompt = wsInput.value.trim();
      if (!prompt) return;

      document.getElementById('ws-welcome').style.display = 'none';
      var doc = document.getElementById('ws-doc');
      doc.classList.add('visible');
      document.getElementById('ws-docname').textContent = prompt.substring(0, 40) + (prompt.length > 40 ? '...' : '');
      wsInput.value = '';
      wsInput.placeholder = 'Continue editing — add a section, revise, expand...';

      doc.innerHTML = '<div style="text-align:center;padding:60px 0"><div style="width:36px;height:36px;border-radius:50%;border:2px solid rgba(58,148,100,.15);border-top-color:#3A9464;animation:spin .8s linear infinite;margin:0 auto 16px"></div><div style="font-size:14px;color:rgba(255,255,255,.4)">Building your document...</div><style>@keyframes spin{to{transform:rotate(360deg)}}</style></div>';

      await new Promise(function(r) { setTimeout(r, 2000); });

      doc.innerHTML = '<h1>' + prompt + '</h1>'
        + '<div class="sub">Generated document — Silver Key Realty Workspace</div>'
        + '<p>This workspace will connect to the Anthropic API to generate real documents, emails, CMA reports, deal memos, and client communications. The AI will use context from your leads, deals, properties, and team data to produce accurate, branded content.</p>'
        + '<h2>What This Will Do</h2>'
        + '<p>When the API integration is live, typing a prompt like "' + prompt + '" will generate a complete, professionally formatted document using your actual Silver Key data. Every document is saved to Quam Drive with custody chain tracking.</p>'
        + '<h2>Next Steps</h2>'
        + '<p>Connect the Anthropic API key in Vercel environment variables (ANTHROPIC_API_KEY), and this workspace becomes a fully functional AI document generator with real-time data access.</p>';

      document.getElementById('ws-scroll').scrollTop = 0;

      setTimeout(function() { document.getElementById('ws-right').classList.add('open'); }, 800);
    }

    window.addEventListener('skr-ready', function() {
      // Workspace is ready
    });
  </script>
</body>
</html>
